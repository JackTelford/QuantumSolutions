"use strict";

window.stripePaymentForm = function stripePaymentForm(stripe, clientSecret, paymentIntentId, antiForgeryToken, urlPrefix, errorText, missingText, updatePaymentIntentUrl) {
  let validateUrl = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : 'checkout/validate/stripe';
  let paramsUrl = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : 'stripe/params';
  let priceUrl = arguments.length > 10 && arguments[10] !== undefined ? arguments[10] : 'checkout/price';
  let errorContainerSelector = arguments.length > 11 && arguments[11] !== undefined ? arguments[11] : '.message-error';
  let stripeFieldErrorSelector = arguments.length > 12 && arguments[12] !== undefined ? arguments[12] : '.stripe-field-error';
  let paymentFormSelector = arguments.length > 13 && arguments[13] !== undefined ? arguments[13] : '.payment-form';
  let payButtonSelector = arguments.length > 14 && arguments[14] !== undefined ? arguments[14] : '.pay-button-stripe';
  let payTextSelector = arguments.length > 15 && arguments[15] !== undefined ? arguments[15] : '.pay-text';
  let paymentProcessingContainerSelector = arguments.length > 16 && arguments[16] !== undefined ? arguments[16] : '.payment-processing-container';
  let placeOfPaymentSelector = arguments.length > 17 && arguments[17] !== undefined ? arguments[17] : '#payment-form_payment';
  let payButtonValueSelector = arguments.length > 18 && arguments[18] !== undefined ? arguments[18] : '.pay-button-value';
  let addressesSelector = arguments.length > 19 && arguments[19] !== undefined ? arguments[19] : '*[id^="OrderPart_ShippingAddress_"], *[id^="OrderPart_BillingAddress_"]';
  let addressSelector = arguments.length > 20 && arguments[20] !== undefined ? arguments[20] : '.address';
  let addressTitleSelector = arguments.length > 21 && arguments[21] !== undefined ? arguments[21] : '.address__title';
  const allErrorContainers = [document.querySelector(errorContainerSelector)];
  const form = document.querySelector(paymentFormSelector);
  const submitButton = form.querySelector(payButtonSelector);
  const payText = submitButton.querySelector(payTextSelector);
  const paymentProcessingContainer = submitButton.querySelector(paymentProcessingContainerSelector);
  const stripeElements = stripe.elements({
    clientSecret
  });
  const payment = stripeElements.create('payment', {
    fields: {
      billingDetails: 'never'
    }
  });
  const placeOfPayment = document.querySelector(placeOfPaymentSelector);
  let formElements = Array.from(form.elements);
  function toggleInputs(enable) {
    formElements.forEach(element => {
      element.readOnly = !enable;
    });
    payment.update({
      readOnly: !enable
    });
    submitButton.disabled = !enable;
    paymentProcessingContainer.hidden = enable;
    payText.hidden = !enable;
  }
  function displayError(errors) {
    let container = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : allErrorContainers[0];
    allErrorContainers.forEach(element => {
      element.hidden = true;
    });
    if (!errors || errors.length === 0) return;
    const err = Array.isArray(errors) ? errors.filter(error => error) : [errors];
    container.innerHTML = '<ul></ul>';
    const ul = container.querySelector('ul');
    err.forEach(error => {
      const li = document.createElement('li');
      li.textContent = error.message || error;
      ul.appendChild(li);
    });
    toggleInputs(true);
    container.hidden = false;
    container.scrollIntoView({
      block: 'center'
    });
  }
  function fetchPost(path) {
    return fetch(`${urlPrefix}/${path}`, {
      method: 'POST',
      body: new FormData(form)
    }).then(response => response.json());
  }
  function getText(element) {
    return element?.textContent.trim();
  }
  function registerElements() {
    // Displaying payment input error.
    const stripeFieldError = document.querySelector(stripeFieldErrorSelector);
    allErrorContainers.push(stripeFieldError);
    payment.on('change', event => {
      displayError(event?.error, stripeFieldError);
    });
    submitButton.addEventListener('click', async event => {
      // We don't want to let default form submission happen here, which would refresh the page.
      event.preventDefault();
      toggleInputs(false);
      let result;
      try {
        const emptyRequiredFields = Array.from(form.querySelectorAll('input')).filter(element => element.required && !element.hidden).filter(element => !element.value?.match(/\S+/));
        if (emptyRequiredFields.length) {
          toggleInputs(true);
          throw emptyRequiredFields.map(element => document.querySelector(`label[for="${element.id}"]`)).filter(getText).filter(label => !label.closest(addressSelector)?.hidden).map(label => {
            const title = getText(label.closest(addressSelector)?.querySelector(addressTitleSelector));
            const name = title ? `${title} ${getText(label)}` : getText(label);
            return missingText.replace('%LABEL%', name);
          });
        }
        const validationJson = await fetchPost(`${validateUrl}/${paymentIntentId}`);
        if (validationJson?.errors?.length) {
          toggleInputs(true);
          throw validationJson.errors;
        }
        const confirmPaymentOptions = {
          elements: stripeElements,
          confirmParams: await fetchPost(paramsUrl)
        };
        result = await stripe.confirmPayment(confirmPaymentOptions);
        displayError(result.error);
      } catch (error) {
        result = {
          error
        };
        displayError(result.error);
      }
    });
  }
  function registerPriceUpdater() {
    let debounce = false;
    Array.from(document.querySelectorAll(addressesSelector)).forEach(element => element.addEventListener('change', () => {
      if (debounce) return;
      const payButtonValue = document.querySelector(payButtonValueSelector);
      if (!payButtonValue) return;
      debounce = true;
      submitButton.disabled = true;
      setTimeout(async () => {
        const priceJson = await fetchPost(priceUrl);
        debounce = false;
        submitButton.disabled = false;

        // This is not essential if it fails so we intentionally don't catch it. This way if there is an error it can still be seen in the
        // browser log during development or UI testing.
        if ('error' in priceJson) throw priceJson;
        payButtonValue.setAttribute('data-value', priceJson.value);
        payButtonValue.setAttribute('data-currency', priceJson.currency);
        payButtonValue.textContent = priceJson.text;
      }, 50); // Prevent multiple requests when several fields are updated at once.
    }));
  }
  if (placeOfPayment) {
    payment.mount(placeOfPayment);

    // Refreshing form elements with the payment input.
    formElements = Array.from(form.elements);
    registerElements();
    registerPriceUpdater();
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ3aW5kb3ciLCJzdHJpcGVQYXltZW50Rm9ybSIsInN0cmlwZSIsImNsaWVudFNlY3JldCIsInBheW1lbnRJbnRlbnRJZCIsImFudGlGb3JnZXJ5VG9rZW4iLCJ1cmxQcmVmaXgiLCJlcnJvclRleHQiLCJtaXNzaW5nVGV4dCIsInVwZGF0ZVBheW1lbnRJbnRlbnRVcmwiLCJ2YWxpZGF0ZVVybCIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsInBhcmFtc1VybCIsInByaWNlVXJsIiwiZXJyb3JDb250YWluZXJTZWxlY3RvciIsInN0cmlwZUZpZWxkRXJyb3JTZWxlY3RvciIsInBheW1lbnRGb3JtU2VsZWN0b3IiLCJwYXlCdXR0b25TZWxlY3RvciIsInBheVRleHRTZWxlY3RvciIsInBheW1lbnRQcm9jZXNzaW5nQ29udGFpbmVyU2VsZWN0b3IiLCJwbGFjZU9mUGF5bWVudFNlbGVjdG9yIiwicGF5QnV0dG9uVmFsdWVTZWxlY3RvciIsImFkZHJlc3Nlc1NlbGVjdG9yIiwiYWRkcmVzc1NlbGVjdG9yIiwiYWRkcmVzc1RpdGxlU2VsZWN0b3IiLCJhbGxFcnJvckNvbnRhaW5lcnMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJmb3JtIiwic3VibWl0QnV0dG9uIiwicGF5VGV4dCIsInBheW1lbnRQcm9jZXNzaW5nQ29udGFpbmVyIiwic3RyaXBlRWxlbWVudHMiLCJlbGVtZW50cyIsInBheW1lbnQiLCJjcmVhdGUiLCJmaWVsZHMiLCJiaWxsaW5nRGV0YWlscyIsInBsYWNlT2ZQYXltZW50IiwiZm9ybUVsZW1lbnRzIiwiQXJyYXkiLCJmcm9tIiwidG9nZ2xlSW5wdXRzIiwiZW5hYmxlIiwiZm9yRWFjaCIsImVsZW1lbnQiLCJyZWFkT25seSIsInVwZGF0ZSIsImRpc2FibGVkIiwiaGlkZGVuIiwiZGlzcGxheUVycm9yIiwiZXJyb3JzIiwiY29udGFpbmVyIiwiZXJyIiwiaXNBcnJheSIsImZpbHRlciIsImVycm9yIiwiaW5uZXJIVE1MIiwidWwiLCJsaSIsImNyZWF0ZUVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsIm1lc3NhZ2UiLCJhcHBlbmRDaGlsZCIsInNjcm9sbEludG9WaWV3IiwiYmxvY2siLCJmZXRjaFBvc3QiLCJwYXRoIiwiZmV0Y2giLCJtZXRob2QiLCJib2R5IiwiRm9ybURhdGEiLCJ0aGVuIiwicmVzcG9uc2UiLCJqc29uIiwiZ2V0VGV4dCIsInRyaW0iLCJyZWdpc3RlckVsZW1lbnRzIiwic3RyaXBlRmllbGRFcnJvciIsInB1c2giLCJvbiIsImV2ZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInByZXZlbnREZWZhdWx0IiwicmVzdWx0IiwiZW1wdHlSZXF1aXJlZEZpZWxkcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJyZXF1aXJlZCIsInZhbHVlIiwibWF0Y2giLCJtYXAiLCJpZCIsImxhYmVsIiwiY2xvc2VzdCIsInRpdGxlIiwibmFtZSIsInJlcGxhY2UiLCJ2YWxpZGF0aW9uSnNvbiIsImNvbmZpcm1QYXltZW50T3B0aW9ucyIsImNvbmZpcm1QYXJhbXMiLCJjb25maXJtUGF5bWVudCIsInJlZ2lzdGVyUHJpY2VVcGRhdGVyIiwiZGVib3VuY2UiLCJwYXlCdXR0b25WYWx1ZSIsInNldFRpbWVvdXQiLCJwcmljZUpzb24iLCJzZXRBdHRyaWJ1dGUiLCJjdXJyZW5jeSIsInRleHQiLCJtb3VudCJdLCJzb3VyY2VzIjpbIi4uLy4uL0Fzc2V0cy9TY3JpcHRzL3N0cmlwZS1wYXltZW50LWZvcm0uanMiXSwic291cmNlc0NvbnRlbnQiOlsid2luZG93LnN0cmlwZVBheW1lbnRGb3JtID0gZnVuY3Rpb24gc3RyaXBlUGF5bWVudEZvcm0oXHJcbiAgICBzdHJpcGUsXHJcbiAgICBjbGllbnRTZWNyZXQsXHJcbiAgICBwYXltZW50SW50ZW50SWQsXHJcbiAgICBhbnRpRm9yZ2VyeVRva2VuLFxyXG4gICAgdXJsUHJlZml4LFxyXG4gICAgZXJyb3JUZXh0LFxyXG4gICAgbWlzc2luZ1RleHQsXHJcbiAgICB1cGRhdGVQYXltZW50SW50ZW50VXJsLFxyXG4gICAgdmFsaWRhdGVVcmwgPSAnY2hlY2tvdXQvdmFsaWRhdGUvc3RyaXBlJyxcclxuICAgIHBhcmFtc1VybCA9ICdzdHJpcGUvcGFyYW1zJyxcclxuICAgIHByaWNlVXJsID0gJ2NoZWNrb3V0L3ByaWNlJyxcclxuICAgIGVycm9yQ29udGFpbmVyU2VsZWN0b3IgPSAnLm1lc3NhZ2UtZXJyb3InLFxyXG4gICAgc3RyaXBlRmllbGRFcnJvclNlbGVjdG9yID0gJy5zdHJpcGUtZmllbGQtZXJyb3InLFxyXG4gICAgcGF5bWVudEZvcm1TZWxlY3RvciA9ICcucGF5bWVudC1mb3JtJyxcclxuICAgIHBheUJ1dHRvblNlbGVjdG9yID0gJy5wYXktYnV0dG9uLXN0cmlwZScsXHJcbiAgICBwYXlUZXh0U2VsZWN0b3IgPSAnLnBheS10ZXh0JyxcclxuICAgIHBheW1lbnRQcm9jZXNzaW5nQ29udGFpbmVyU2VsZWN0b3IgPSAnLnBheW1lbnQtcHJvY2Vzc2luZy1jb250YWluZXInLFxyXG4gICAgcGxhY2VPZlBheW1lbnRTZWxlY3RvciA9ICcjcGF5bWVudC1mb3JtX3BheW1lbnQnLFxyXG4gICAgcGF5QnV0dG9uVmFsdWVTZWxlY3RvciA9ICcucGF5LWJ1dHRvbi12YWx1ZScsXHJcbiAgICBhZGRyZXNzZXNTZWxlY3RvciA9ICcqW2lkXj1cIk9yZGVyUGFydF9TaGlwcGluZ0FkZHJlc3NfXCJdLCAqW2lkXj1cIk9yZGVyUGFydF9CaWxsaW5nQWRkcmVzc19cIl0nLFxyXG4gICAgYWRkcmVzc1NlbGVjdG9yID0gJy5hZGRyZXNzJyxcclxuICAgIGFkZHJlc3NUaXRsZVNlbGVjdG9yID0gJy5hZGRyZXNzX190aXRsZSdcclxuKSB7XHJcbiAgICBjb25zdCBhbGxFcnJvckNvbnRhaW5lcnMgPSBbZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlcnJvckNvbnRhaW5lclNlbGVjdG9yKV07XHJcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihwYXltZW50Rm9ybVNlbGVjdG9yKTtcclxuICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGZvcm0ucXVlcnlTZWxlY3RvcihwYXlCdXR0b25TZWxlY3Rvcik7XHJcbiAgICBjb25zdCBwYXlUZXh0ID0gc3VibWl0QnV0dG9uLnF1ZXJ5U2VsZWN0b3IocGF5VGV4dFNlbGVjdG9yKTtcclxuICAgIGNvbnN0IHBheW1lbnRQcm9jZXNzaW5nQ29udGFpbmVyID0gc3VibWl0QnV0dG9uLnF1ZXJ5U2VsZWN0b3IocGF5bWVudFByb2Nlc3NpbmdDb250YWluZXJTZWxlY3Rvcik7XHJcbiAgICBjb25zdCBzdHJpcGVFbGVtZW50cyA9IHN0cmlwZS5lbGVtZW50cyh7IGNsaWVudFNlY3JldCB9KTtcclxuICAgIGNvbnN0IHBheW1lbnQgPSBzdHJpcGVFbGVtZW50cy5jcmVhdGUoJ3BheW1lbnQnLCB7IGZpZWxkczogeyBiaWxsaW5nRGV0YWlsczogJ25ldmVyJyB9IH0pO1xyXG4gICAgY29uc3QgcGxhY2VPZlBheW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBsYWNlT2ZQYXltZW50U2VsZWN0b3IpO1xyXG5cclxuICAgIGxldCBmb3JtRWxlbWVudHMgPSBBcnJheS5mcm9tKGZvcm0uZWxlbWVudHMpO1xyXG5cclxuICAgIGZ1bmN0aW9uIHRvZ2dsZUlucHV0cyhlbmFibGUpIHtcclxuICAgICAgICBmb3JtRWxlbWVudHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICBlbGVtZW50LnJlYWRPbmx5ID0gIWVuYWJsZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcGF5bWVudC51cGRhdGUoeyByZWFkT25seTogIWVuYWJsZSB9KTtcclxuICAgICAgICBzdWJtaXRCdXR0b24uZGlzYWJsZWQgPSAhZW5hYmxlO1xyXG4gICAgICAgIHBheW1lbnRQcm9jZXNzaW5nQ29udGFpbmVyLmhpZGRlbiA9IGVuYWJsZTtcclxuICAgICAgICBwYXlUZXh0LmhpZGRlbiA9ICFlbmFibGU7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZGlzcGxheUVycm9yKGVycm9ycywgY29udGFpbmVyID0gYWxsRXJyb3JDb250YWluZXJzWzBdKSB7XHJcbiAgICAgICAgYWxsRXJyb3JDb250YWluZXJzLmZvckVhY2goKGVsZW1lbnQpID0+IHsgZWxlbWVudC5oaWRkZW4gPSB0cnVlOyB9KTtcclxuICAgICAgICBpZiAoIWVycm9ycyB8fCBlcnJvcnMubGVuZ3RoID09PSAwKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IGVyciA9IEFycmF5LmlzQXJyYXkoZXJyb3JzKSA/IGVycm9ycy5maWx0ZXIoKGVycm9yKSA9PiBlcnJvcikgOiBbZXJyb3JzXTtcclxuXHJcbiAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICc8dWw+PC91bD4nO1xyXG4gICAgICAgIGNvbnN0IHVsID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ3VsJyk7XHJcbiAgICAgICAgZXJyLmZvckVhY2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcclxuICAgICAgICAgICAgbGkudGV4dENvbnRlbnQgPSBlcnJvci5tZXNzYWdlIHx8IGVycm9yO1xyXG4gICAgICAgICAgICB1bC5hcHBlbmRDaGlsZChsaSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRvZ2dsZUlucHV0cyh0cnVlKTtcclxuICAgICAgICBjb250YWluZXIuaGlkZGVuID0gZmFsc2U7XHJcbiAgICAgICAgY29udGFpbmVyLnNjcm9sbEludG9WaWV3KHsgYmxvY2s6ICdjZW50ZXInIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGZldGNoUG9zdChwYXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3VybFByZWZpeH0vJHtwYXRofWAsIHsgbWV0aG9kOiAnUE9TVCcsIGJvZHk6IG5ldyBGb3JtRGF0YShmb3JtKSB9KVxyXG4gICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHJlc3BvbnNlLmpzb24oKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0VGV4dChlbGVtZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ/LnRleHRDb250ZW50LnRyaW0oKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiByZWdpc3RlckVsZW1lbnRzKCkge1xyXG4gICAgICAgIC8vIERpc3BsYXlpbmcgcGF5bWVudCBpbnB1dCBlcnJvci5cclxuICAgICAgICBjb25zdCBzdHJpcGVGaWVsZEVycm9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzdHJpcGVGaWVsZEVycm9yU2VsZWN0b3IpO1xyXG4gICAgICAgIGFsbEVycm9yQ29udGFpbmVycy5wdXNoKHN0cmlwZUZpZWxkRXJyb3IpO1xyXG4gICAgICAgIHBheW1lbnQub24oJ2NoYW5nZScsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBkaXNwbGF5RXJyb3IoZXZlbnQ/LmVycm9yLCBzdHJpcGVGaWVsZEVycm9yKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgc3VibWl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIFdlIGRvbid0IHdhbnQgdG8gbGV0IGRlZmF1bHQgZm9ybSBzdWJtaXNzaW9uIGhhcHBlbiBoZXJlLCB3aGljaCB3b3VsZCByZWZyZXNoIHRoZSBwYWdlLlxyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0b2dnbGVJbnB1dHMoZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgbGV0IHJlc3VsdDtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVtcHR5UmVxdWlyZWRGaWVsZHMgPSBBcnJheS5mcm9tKGZvcm0ucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKSlcclxuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKChlbGVtZW50KSA9PiBlbGVtZW50LnJlcXVpcmVkICYmICFlbGVtZW50LmhpZGRlbilcclxuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKChlbGVtZW50KSA9PiAhZWxlbWVudC52YWx1ZT8ubWF0Y2goL1xcUysvKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGVtcHR5UmVxdWlyZWRGaWVsZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlSW5wdXRzKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVtcHR5UmVxdWlyZWRGaWVsZHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZWxlbWVudCkgPT4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgbGFiZWxbZm9yPVwiJHtlbGVtZW50LmlkfVwiXWApKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGdldFRleHQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoKGxhYmVsKSA9PiAhbGFiZWwuY2xvc2VzdChhZGRyZXNzU2VsZWN0b3IpPy5oaWRkZW4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGxhYmVsKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0aXRsZSA9IGdldFRleHQobGFiZWwuY2xvc2VzdChhZGRyZXNzU2VsZWN0b3IpPy5xdWVyeVNlbGVjdG9yKGFkZHJlc3NUaXRsZVNlbGVjdG9yKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gdGl0bGUgPyBgJHt0aXRsZX0gJHtnZXRUZXh0KGxhYmVsKX1gIDogZ2V0VGV4dChsYWJlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWlzc2luZ1RleHQucmVwbGFjZSgnJUxBQkVMJScsIG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB2YWxpZGF0aW9uSnNvbiA9IGF3YWl0IGZldGNoUG9zdChgJHt2YWxpZGF0ZVVybH0vJHtwYXltZW50SW50ZW50SWR9YCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsaWRhdGlvbkpzb24/LmVycm9ycz8ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlSW5wdXRzKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IHZhbGlkYXRpb25Kc29uLmVycm9ycztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb25maXJtUGF5bWVudE9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHM6IHN0cmlwZUVsZW1lbnRzLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpcm1QYXJhbXM6IGF3YWl0IGZldGNoUG9zdChwYXJhbXNVcmwpLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IHN0cmlwZS5jb25maXJtUGF5bWVudChjb25maXJtUGF5bWVudE9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgICAgIGRpc3BsYXlFcnJvcihyZXN1bHQuZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0geyBlcnJvciB9O1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheUVycm9yKHJlc3VsdC5lcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiByZWdpc3RlclByaWNlVXBkYXRlcigpIHtcclxuICAgICAgICBsZXQgZGVib3VuY2UgPSBmYWxzZTtcclxuICAgICAgICBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYWRkcmVzc2VzU2VsZWN0b3IpKVxyXG4gICAgICAgICAgICAuZm9yRWFjaCgoZWxlbWVudCkgPT4gZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGVib3VuY2UpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXlCdXR0b25WYWx1ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocGF5QnV0dG9uVmFsdWVTZWxlY3Rvcik7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXBheUJ1dHRvblZhbHVlKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgZGVib3VuY2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmljZUpzb24gPSBhd2FpdCBmZXRjaFBvc3QocHJpY2VVcmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlYm91bmNlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgbm90IGVzc2VudGlhbCBpZiBpdCBmYWlscyBzbyB3ZSBpbnRlbnRpb25hbGx5IGRvbid0IGNhdGNoIGl0LiBUaGlzIHdheSBpZiB0aGVyZSBpcyBhbiBlcnJvciBpdCBjYW4gc3RpbGwgYmUgc2VlbiBpbiB0aGVcclxuICAgICAgICAgICAgICAgICAgICAvLyBicm93c2VyIGxvZyBkdXJpbmcgZGV2ZWxvcG1lbnQgb3IgVUkgdGVzdGluZy5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoJ2Vycm9yJyBpbiBwcmljZUpzb24pIHRocm93IHByaWNlSnNvbjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcGF5QnV0dG9uVmFsdWUuc2V0QXR0cmlidXRlKCdkYXRhLXZhbHVlJywgcHJpY2VKc29uLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBwYXlCdXR0b25WYWx1ZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtY3VycmVuY3knLCBwcmljZUpzb24uY3VycmVuY3kpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBheUJ1dHRvblZhbHVlLnRleHRDb250ZW50ID0gcHJpY2VKc29uLnRleHQ7XHJcbiAgICAgICAgICAgICAgICB9LCA1MCk7IC8vIFByZXZlbnQgbXVsdGlwbGUgcmVxdWVzdHMgd2hlbiBzZXZlcmFsIGZpZWxkcyBhcmUgdXBkYXRlZCBhdCBvbmNlLlxyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHBsYWNlT2ZQYXltZW50KSB7XHJcbiAgICAgICAgcGF5bWVudC5tb3VudChwbGFjZU9mUGF5bWVudCk7XHJcblxyXG4gICAgICAgIC8vIFJlZnJlc2hpbmcgZm9ybSBlbGVtZW50cyB3aXRoIHRoZSBwYXltZW50IGlucHV0LlxyXG4gICAgICAgIGZvcm1FbGVtZW50cyA9IEFycmF5LmZyb20oZm9ybS5lbGVtZW50cyk7XHJcbiAgICAgICAgcmVnaXN0ZXJFbGVtZW50cygpO1xyXG4gICAgICAgIHJlZ2lzdGVyUHJpY2VVcGRhdGVyKCk7XHJcbiAgICB9XHJcbn07XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQUEsTUFBTSxDQUFDQyxpQkFBaUIsR0FBRyxTQUFTQSxpQkFBaUJBLENBQ2pEQyxNQUFNLEVBQ05DLFlBQVksRUFDWkMsZUFBZSxFQUNmQyxnQkFBZ0IsRUFDaEJDLFNBQVMsRUFDVEMsU0FBUyxFQUNUQyxXQUFXLEVBQ1hDLHNCQUFzQixFQWV4QjtFQUFBLElBZEVDLFdBQVcsR0FBQUMsU0FBQSxDQUFBQyxNQUFBLFFBQUFELFNBQUEsUUFBQUUsU0FBQSxHQUFBRixTQUFBLE1BQUcsMEJBQTBCO0VBQUEsSUFDeENHLFNBQVMsR0FBQUgsU0FBQSxDQUFB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