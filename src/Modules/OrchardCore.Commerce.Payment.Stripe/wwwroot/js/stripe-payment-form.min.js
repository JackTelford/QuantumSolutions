"use strict";window.stripePaymentForm=function(e,t,r,n,o,i,l,c){let a=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"checkout/validate/stripe",d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"stripe/params",s=arguments.length>10&&void 0!==arguments[10]?arguments[10]:"checkout/price",u=arguments.length>11&&void 0!==arguments[11]?arguments[11]:".message-error",h=arguments.length>12&&void 0!==arguments[12]?arguments[12]:".stripe-field-error",m=arguments.length>13&&void 0!==arguments[13]?arguments[13]:".payment-form",y=arguments.length>14&&void 0!==arguments[14]?arguments[14]:".pay-button-stripe",f=arguments.length>15&&void 0!==arguments[15]?arguments[15]:".pay-text",p=arguments.length>16&&void 0!==arguments[16]?arguments[16]:".payment-processing-container",g=arguments.length>17&&void 0!==arguments[17]?arguments[17]:"#payment-form_payment",v=arguments.length>18&&void 0!==arguments[18]?arguments[18]:".pay-button-value",S=arguments.length>19&&void 0!==arguments[19]?arguments[19]:'*[id^="OrderPart_ShippingAddress_"], *[id^="OrderPart_BillingAddress_"]',q=arguments.length>20&&void 0!==arguments[20]?arguments[20]:".address",A=arguments.length>21&&void 0!==arguments[21]?arguments[21]:".address__title";const b=[document.querySelector(u)],w=document.querySelector(m),E=w.querySelector(y),$=E.querySelector(f),_=E.querySelector(p),P=e.elements({clientSecret:t}),x=P.create("payment",{fields:{billingDetails:"never"}}),L=document.querySelector(g);let O=Array.from(w.elements);function k(e){O.forEach((t=>{t.readOnly=!e})),x.update({readOnly:!e}),E.disabled=!e,_.hidden=e,$.hidden=!e}function C(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b[0];if(b.forEach((e=>{e.hidden=!0})),!e||0===e.length)return;const r=Array.isArray(e)?e.filter((e=>e)):[e];t.innerHTML="<ul></ul>";const n=t.querySelector("ul");r.forEach((e=>{const t=document.createElement("li");t.textContent=e.message||e,n.appendChild(t)})),k(!0),t.hidden=!1,t.scrollIntoView({block:"center"})}function D(e){return fetch(`${o}/${e}`,{method:"POST",body:new FormData(w)}).then((e=>e.json()))}function T(e){return e?.textContent.trim()}L&&(x.mount(L),O=Array.from(w.elements),function(){const t=document.querySelector(h);b.push(t),x.on("change",(e=>{C(e?.error,t)})),E.addEventListener("click",(async t=>{let n;t.preventDefault(),k(!1);try{const t=Array.from(w.querySelectorAll("input")).filter((e=>e.required&&!e.hidden)).filter((e=>!e.value?.match(/\S+/)));if(t.length)throw k(!0),t.map((e=>document.querySelector(`label[for="${e.id}"]`))).filter(T).filter((e=>!e.closest(q)?.hidden)).map((e=>{const t=T(e.closest(q)?.querySelector(A)),r=t?`${t} ${T(e)}`:T(e);return l.replace("%LABEL%",r)}));const o=await D(`${a}/${r}`);if(o?.errors?.length)throw k(!0),o.errors;const i={elements:P,confirmParams:await D(d)};n=await e.confirmPayment(i),C(n.error)}catch(e){n={error:e},C(n.error)}}))}(),function(){let e=!1;Array.from(document.querySelectorAll(S)).forEach((t=>t.addEventListener("change",(()=>{if(e)return;const t=document.querySelector(v);t&&(e=!0,E.disabled=!0,setTimeout((async()=>{const r=await D(s);if(e=!1,E.disabled=!1,"error"in r)throw r;t.setAttribute("data-value",r.value),t.setAttribute("data-currency",r.currency),t.textContent=r.text}),50))}))))}())};
//# sourceMappingURL=stripe-payment-form.min.js.map